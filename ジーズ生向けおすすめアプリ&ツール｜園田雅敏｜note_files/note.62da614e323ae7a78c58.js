(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{1419:function(e,t,n){"use strict";n(24),n(32);var r=n(3).a.extend({inheritAttrs:!1,props:{amount:{type:Number,required:!0,default:0},prefix:{type:String,default:"¥"},suffix:{type:String,default:""},separator:{type:String,default:","}},computed:{computedAmount(){return[this.prefix,this.addSeparator(this.amount,this.separator),this.suffix].join("")}},methods:{addSeparator:(e,t)=>e.toString().replace(/(\d)(?=(?:\d{3})+\b)/g,"$1".concat(t))}}),o=n(5),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",e._b({},"span",e.$attrs,!1),[e._v(e._s(e.computedAmount))])}),[],!1,null,null,null);t.a=component.exports},1746:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return _})),n.d(t,"g",(function(){return f})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return C})),n.d(t,"h",(function(){return w})),n.d(t,"i",(function(){return k}));var r=n(1894),o=n.n(r),c="https://assets.st-note.com/poc-image/manual/230215_paypay/production/230130_paypay_banner_700_300.png?format=jpg",l="https://assets.st-note.com/poc-image/manual/230215_paypay/production/230130_paypay_banner_625_%E2%80%8A365.png?format=jpg",d="https://assets.st-note.com/poc-image/manual/230215_paypay/production/230130_paypay_banner_840_302.png?format=jpg",h="https://assets.st-note.com/poc-image/manual/230215_paypay/production/230130_paypay_banner_home.png?format=jpg",m="https://assets.st-note.com/poc-image/manual/230215_paypay/production/230130_paypay_banner_700_300.png?format=jpg",_="超ペイペイジャンボ開催中 PayPayで支払うと1等当選で最大全額戻ってくる ※条件・上限あり 02/15(水)→04/16(日)",f="/notemag/n/n0ce826c077c3",v=new Date("2023-02-15T09:00:00.000+09:00"),y=new Date("2023-04-16T23:59:59.999+09:00");function x(){return o()(Date.now(),v,y)}function C(e,t,content){var n="imp"===t?"paypay-campaign-banner-imp":"paypay-campaign-banner-click",r="object"!=typeof window?"medium":window.innerWidth<768?"small":window.innerWidth<992?"medium":"large",o="purchase"===content.name?content.key:null;e.trackActionLogs([e.buildActionLogRecord({kind:n,contents:{name:content.name,screen_size:r,key:o,type:content.type,user_id:content.user_id}})])}function w(e,component){switch(e){case"support":return;case"note_purchase":return component.note.key;case"magazine_purchase":return component.magazine.key;default:return}}function k(e){switch(e){case"support":return"Support";case"note_purchase":return"Note";case"magazine_purchase":return"Magazine";default:return}}},1763:function(e,t,n){"use strict";var r=n(3),o=n(1419),c=n(25),l=n(26),d=n(47),h=n(1799),m=r.a.extend({components:{NtImage:c.a,NtCurrency:o.a,NtIcon:l.default,NtLink:d.a,PaywallRemainingContentLabel:h.a},props:{kind:{type:String,required:!0},imageUrl:{type:String,default:void 0},title:{type:String,required:!0},authorName:{type:String,required:!0},price:{type:Number,default:void 0},pricePrefix:{type:String,default:""},priceSuffix:{type:String,default:"円"},note:{type:Object,default:void 0},magazine:{type:Object,default:void 0},isSimpleNonRefundableMessageTreatment:{type:Boolean,default:!1}},computed:{cannotRefund(){return!1===this.isLoggedIn||("magazine"===this.kind||"note"===this.kind&&(this.note&&!0!==this.note.isRefund))}}}),_=n(5),component=Object(_.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-purchaseCover flex items-start"},[e.imageUrl?n("div",{staticClass:"flex-none mr-4"},[n("nt-image",{class:["rounded h-10 border border-border-default","note"===e.kind?"w-10":"object-cover w-20"],attrs:{src:e._f("imageSquare")(e.imageUrl,e.isMobile,"small"),lazy:!1,alt:""}})],1):e._e(),e._v(" "),n("div",{staticClass:"w-full"},[n("div",{staticClass:"flex items-start flex-wrap"},[n("div",{staticClass:"flex-1"},[n("div",{staticClass:"font-bold leading-6"},[e._v("\n          "+e._s(e._f("truncate")(e.title,30))+"\n        ")]),e._v(" "),e.magazine?n("div",{staticClass:"flex items-center"},[n("nt-icon",{attrs:{clickable:!1,type:"magazine",size:"small"}}),e._v(" "),n("span",{staticClass:"text-xs font-bold ml-1"},[e._v("\n            "+e._s(e.magazine.noteCount)+"本\n          ")])],1):e._e(),e._v(" "),n("div",{staticClass:"text-sm leading-6 break-all text-text-secondary"},[e._v("\n          "+e._s(e.authorName)+"\n        ")]),e._v(" "),e.note?n("div",{staticClass:"inline-block mt-2"},[n("paywall-remaining-content-label",{attrs:{note:e.note}})],1):e._e(),e._v(" "),e.isSimpleNonRefundableMessageTreatment&&e.cannotRefund?n("div",{staticClass:"text-text-secondary text-xs"},[e._v("\n          返金不可\n        ")]):e._e()]),e._v(" "),e.price?n("div",{staticClass:"flex flex-wrap items-center"},[n("div",{staticClass:"font-bold text-right text-custom-accent whitespace-nowrap"},[n("nt-currency",{attrs:{amount:e.price,prefix:e.pricePrefix,suffix:e.priceSuffix}})],1),e._v(" "),e.cannotRefund&&!e.isSimpleNonRefundableMessageTreatment?n("div",{staticClass:"flex items-center ml-2"},[n("div",{staticClass:"box-border flex items-center h-5 py-1 px-2 mr-1 font-bold leading-none text-text-invert bg-surface-caution rounded-full text-xs"},[n("nt-icon",{staticClass:"mr-1",attrs:{clickable:!1,size:"small",type:"warning"}}),e._v("\n            返金不可\n          ")],1),e._v(" "),n("nt-link",{staticClass:"text-text-clickable h-4 hover:text-text-secondary transition-all",attrs:{href:e.$path.staticPath("https://help-note.com/hc/ja/articles/360000670602/"),"aria-label":"返金について",target:"_blank"}},[n("nt-icon",{attrs:{clickable:!1,size:"small",type:"help"}})],1)],1):e._e()]):e._e()]),e._v(" "),e.magazine&&e.magazine.noteCount<=0?n("div",{staticClass:"text-xs mt-1 font-bold text-text-secondary"},[e._v("\n      ※現在このマガジンには記事が収録されていません\n    ")]):e._e()])])}),[],!1,null,null,null);t.a=component.exports},1799:function(e,t,n){"use strict";var r=n(3),o=n(26),c=n(107),l=e=>"画像".concat(Object(c.i)(e),"枚"),d=e=>{var t,text=[(t=e.remainedCharNum,"".concat(Object(c.i)(t),"文字"))];return e.remainedImageNum>0&&text.push(l(e.remainedImageNum)),e.remainedFileNum>0&&text.push((e=>"ファイル".concat(Object(c.i)(e),"個"))(e.remainedFileNum)),text},h=r.a.extend({components:{NtIcon:o.default},props:{note:{type:Object,required:!0}},computed:{countTexts(){return(e=>{switch(e.type){case"TextNote":return d(e);case"ImageNote":return[l(e.pictures.length-1)];default:return[]}})(this.note)},warningIconVisible(){return(e=>{switch(e.type){case"TextNote":return 0===e.remainedCharNum;case"ImageNote":return e.pictures.length-1==0;default:return!1}})(this.note)}}}),m=n(5),component=Object(m.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.countTexts.length>0?n("div",{staticClass:"text-text-secondary text-xs"},[e.warningIconVisible?n("span",{staticClass:"text-text-caution mr-1"},[n("nt-icon",{attrs:{type:"warning",size:"small",clickable:!1}})],1):e._e(),e._v("\n  この続き:\n  "),e._l(e.countTexts,(function(text,t){return[t>0?n("span",{key:text,staticClass:"mx-1"},[e._v("\n      /\n    ")]):e._e(),e._v("\n    "+e._s(text)+"\n  ")]}))],2):e._e()}),[],!1,null,null,null);t.a=component.exports},1806:function(e,t,n){var content=n(1956);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(13).default)("9999ddd4",content,!0,{sourceMap:!1})},1894:function(e,t,n){var r=n(52);e.exports=function(e,t,n){var time=r(e).getTime(),o=r(t).getTime(),c=r(n).getTime();if(o>c)throw new Error("The start of the range cannot be after the end of the range");return time>=o&&time<=c}},1923:function(e,t,n){var content=n(2127);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(13).default)("63bef0aa",content,!0,{sourceMap:!1})},1937:function(e,t,n){"use strict";var r=n(3),o=n(78),c=n(1526),l=r.a.extend({components:{NtLinkFunctional:o.a},mixins:[c.a]}),d=(n(2126),n(5)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"m-purchaseConfirmLink",class:{"m-purchaseConfirmLink__treatment":e.isPurchaseConfirmButtonTreatment}},[n("nt-link-functional",{staticClass:"m-purchaseConfirmLink__target",attrs:{href:"https://help-note.com/hc/ja/articles/6253267645337",target:"_blank"}},[e._v("\n    有料コンテンツの購入についての確認事項\n  ")])],1)}),[],!1,null,"42f3527e",null);t.a=component.exports},1955:function(e,t,n){"use strict";n(1806)},1956:function(e,t,n){var r=n(12)((function(i){return i[1]}));r.push([e.i,".o-paypayBanner[data-v-251184ba]{display:block}.o-paypayBanner.mobile-timeline[data-v-251184ba]{padding:16px;text-align:center;border-bottom:1px solid var(--color-border-default)}@media only screen and (min-width:481px){.o-paypayBanner.mobile-timeline[data-v-251184ba]{padding:0 0 40px;margin-bottom:40px}}.o-paypayBanner.mobile-timeline .o-paypayBanner__image[data-v-251184ba],.o-paypayBanner.mobile-timeline .o-paypayBanner__notes[data-v-251184ba]{max-width:360px;margin:0 auto}.o-paypayBanner.purchase[data-v-251184ba]{padding:16px 24px}.o-paypayBanner__image[data-v-251184ba]{width:100%;vertical-align:top;border-radius:4px}.o-paypayBanner__notice[data-v-251184ba]{padding-top:8px;font-size:var(--font-size-xs);font-weight:400;color:var(--color-text-placeholder);text-align:left}",""]),r.locals={},e.exports=r},2e3:function(e,t,n){"use strict";var r=n(0),o=n(3),c=n(78),l=n(1746),d=o.a.extend({components:{NtLinkFunctional:c.a},props:{mode:{type:String,default:"home-right-column"},page:{type:String,default:void 0},contentKey:{type:String,default:void 0},contentType:{type:String,default:void 0}},data:()=>({observer:void 0}),computed:{imageURL(){switch(this.mode){case"home-right-column":return l.a;case"mobile-timeline":return l.e;case"purchase":return l.f;default:return l.a}},clickableComponent(){return"purchase"===this.mode?"button":"NtLinkFunctional"},alt(){switch(this.mode){case"mobile-timeline":return"超ペイペイジャンボ開催中 PayPayで支払うと1等当選で最大全額戻ってくる ※条件・上限あり 02/15(水)→04/16(日)";case"purchase":return"超ペイペイジャンボ開催中 PayPayで支払うと1等当選で最大全額戻ってくる ※条件・上限あり 02/15(水)→04/16(日) 決済の変更";case"home-right-column":default:return"超ペイペイジャンボ開催中 PayPayで支払うと1等当選で最大全額戻ってくる ※条件・上限あり 02/15(水)→04/16(日)"}},articlePath:()=>l.g},mounted(){var e=this;return Object(r.a)((function*(){e.observer=new IntersectionObserver((t=>{t.forEach((t=>{var n;1===t.intersectionRatio&&t.target===e.$el&&(null===(n=e.observer)||void 0===n||n.disconnect(),e.trackActionLog("imp"))}))}),{threshold:[1]}),e.observer.observe(e.$el)}))()},beforeDestroy(){var e;null===(e=this.observer)||void 0===e||e.disconnect()},methods:{handlePaypayBannerClick(e){this.trackActionLog("click"),"purchase"===this.mode&&(e.preventDefault(),e.stopPropagation(),this.$emit("click"))},trackActionLog(e){var t,n;"purchase"===this.mode?Object(l.k)(this.$tracker,e,{name:"purchase",key:this.contentKey,type:this.contentType,user_id:null===(t=this.currentUser)||void 0===t?void 0:t.id}):Object(l.k)(this.$tracker,e,{name:"home",type:this.page,user_id:null===(n=this.currentUser)||void 0===n?void 0:n.id})}}}),h=(n(1955),n(5)),component=Object(h.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"o-paypayBanner "+e.mode},[n(e.clickableComponent,{tag:"component",attrs:{type:"purchase"===e.mode?"button":void 0,target:"purchase"===e.mode?void 0:"_blank",to:e.articlePath},on:{click:function(t){return e.handlePaypayBannerClick(t)}}},[n("img",{staticClass:"o-paypayBanner__image",attrs:{src:e.imageURL,width:"625",height:"365",alt:e.alt}})]),e._v(" "),n("p",{staticClass:"o-paypayBanner__notice"},[e._v("\n    ※付与上限・条件あり\n    ※付与されるPayPayボーナスはPayPay,PayPayカード公式ストアでの利用可。出金・譲渡不可\n  ")])],1)}),[],!1,null,"251184ba",null);t.a=component.exports},2125:function(e,t,n){"use strict";var r=n(53),o=n(9),c=n(2);t.a={data:()=>({currentSupport:null}),validations:()=>({supportMessage:{maxLength:Object(r.maxLength)(o.support.maxMessageNum)},currentSupport:{price:{required:r.required,range:e=>o.support.minPrice<=e&&e<=o.support.maxPrice}}}),computed:{withSupport:{set(e){this.$store.dispatch(c.MODAL_ACTION_TYPES.SET_PURCHASE_MODAL_CONTAINER,{withSupport:e})},get(){return this.$store.state.modal.purchaseModalContainer.withSupport}},supportPrice:{set(e){this.$store.dispatch(c.MODAL_ACTION_TYPES.SET_PURCHASE_MODAL_CONTAINER,{supportPrice:e})},get(){return this.$store.state.modal.purchaseModalContainer.supportPrice}},supportPriceKind:{set(e){this.$store.dispatch(c.MODAL_ACTION_TYPES.SET_PURCHASE_MODAL_CONTAINER,{supportPriceKind:e})},get(){return this.$store.state.modal.purchaseModalContainer.supportPriceKind}},supportMessage:{set(e){this.$store.dispatch(c.MODAL_ACTION_TYPES.SET_PURCHASE_MODAL_CONTAINER,{supportMessage:e}),this.$v.supportMessage.$touch()},get(){return this.$store.state.modal.purchaseModalContainer.supportMessage}},messagePlaceholder:()=>"いつもステキな作品をありがとうございます。新作も楽しみにしています！（".concat(o.support.maxMessageNum,"文字まで）")}}},2126:function(e,t,n){"use strict";n(1923)},2127:function(e,t,n){var r=n(12)((function(i){return i[1]}));r.push([e.i,".m-purchaseConfirmLink[data-v-42f3527e]{padding-right:16px;padding-bottom:8px;text-align:right}@media only screen and (max-width:480px){.m-purchaseConfirmLink__treatment[data-v-42f3527e]{text-align:left}}.m-purchaseConfirmLink__target[data-v-42f3527e]{display:inline-block;font-size:var(--font-size-xs);color:var(--color-text-secondary);text-decoration:underline}@media only screen and (min-width:769px){.m-purchaseConfirmLink__target[data-v-42f3527e]{transition:all .2s cubic-bezier(1,0,0,1)}.m-purchaseConfirmLink__target[data-v-42f3527e]:hover{color:var(--color-text-primary)}}",""]),r.locals={},e.exports=r},2301:function(e,t,n){var content=n(2656);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(13).default)("712e7289",content,!0,{sourceMap:!1})},2304:function(e,t,n){var content=n(2662);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(13).default)("7dd9ae3c",content,!0,{sourceMap:!1})},2544:function(e,t,n){"use strict";var r=n(3),o=n(78),c=n(1526),l=r.a.extend({components:{NtLinkFunctional:o.a},mixins:[c.a]}),d=(n(2655),n(5)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"m-purchaseRefundHelpLink",class:{"m-purchaseRefundHelpLink__treatment":e.isPurchaseConfirmButtonTreatment}},[n("nt-link-functional",{staticClass:"m-purchaseRefundHelpLink__target",attrs:{href:e.$path.staticPath("https://help-note.com/hc/ja/articles/360000670602/"),target:"_blank"}},[e._v("\n    返金について\n  ")])],1)}),[],!1,null,"38ec5b72",null);t.a=component.exports},2545:function(e,t,n){"use strict";var r=n(1201),o=n(9),c=n(189),l=n(25),d={components:{NtInput:c.a,NtImage:l.a},props:{supportPrice:{type:Number,default:void 0},supportPriceKind:{type:String,default:void 0}},data(){var e=Object(r.a)(o.support),t=e.choices,n=this.supportPriceKind||e.defaultKind,c=t.find((e=>e.kind===n));return"sfree"===n&&(c.price=this.supportPrice),{currentSupport:c,supportChoices:t}},created(){this.$emit("input",this.currentSupport)},methods:{selected(e){this.currentSupport=e,this.$emit("change"),this.$emit("input",e)}}},h=(n(2661),n(5)),component=Object(h.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-supportSelectPrice"},e._l(e.supportChoices,(function(t){return n("div",{key:t.kind,staticClass:"m-supportSelectPrice__item"},[n("button",{class:["m-supportSelectPrice__button",{"is-active":e.currentSupport===t}],attrs:{type:"button",active:e.currentSupport===t,"aria-pressed":String(e.currentSupport===t)},on:{click:function(n){return e.selected(t)}}},[n("nt-image",{staticClass:"m-supportSelectPrice__icon",attrs:{src:t.iconPath,lazy:!1,alt:""}}),e._v(" "),n("div",{staticClass:"m-supportSelectPrice__footer"},["sfree"===t.kind?[n("div",{staticClass:"m-supportSelectPrice__custom"},[n("nt-input",{staticClass:"m-supportSelectPrice__customField",attrs:{type:"number",size:"small",min:"100","aria-label":"サポート金額",placeholder:"任意"},on:{input:function(n){return e.$emit("input",t)}},model:{value:t.price,callback:function(n){e.$set(t,"price",n)},expression:"item.price"}})],1),e._v(" "),n("div",{staticClass:"m-supportSelectPrice__unit"},[e._v("\n            円\n          ")])]:[n("div",{staticClass:"m-supportSelectPrice__price"},[e._v("\n            "+e._s(t.price)+"\n          ")]),e._v(" "),n("div",{staticClass:"m-supportSelectPrice__unit"},[e._v("\n            円\n          ")])]],2)],1)])})),0)}),[],!1,null,"53823b47",null);t.a=component.exports},2655:function(e,t,n){"use strict";n(2301)},2656:function(e,t,n){var r=n(12)((function(i){return i[1]}));r.push([e.i,".m-purchaseRefundHelpLink[data-v-38ec5b72]{padding-right:16px;text-align:right}@media only screen and (max-width:480px){.m-purchaseRefundHelpLink__treatment[data-v-38ec5b72]{text-align:left}}.m-purchaseRefundHelpLink__target[data-v-38ec5b72]{display:inline-block;font-size:var(--font-size-xs);color:var(--color-text-secondary);text-decoration:underline}@media only screen and (min-width:769px){.m-purchaseRefundHelpLink__target[data-v-38ec5b72]{transition:all .2s cubic-bezier(1,0,0,1)}.m-purchaseRefundHelpLink__target[data-v-38ec5b72]:hover{color:var(--color-text-primary)}}",""]),r.locals={},e.exports=r},2661:function(e,t,n){"use strict";n(2304)},2662:function(e,t,n){var r=n(12)((function(i){return i[1]}));r.push([e.i,".m-supportSelectPrice[data-v-53823b47]{display:flex;justify-content:space-between}.m-supportSelectPrice__item[data-v-53823b47]{flex:1}.m-supportSelectPrice__button[data-v-53823b47]{display:block;width:100%;padding:8px 4px;text-align:center;border:2px solid transparent;border-radius:4px}@media only screen and (min-width:769px){.m-supportSelectPrice__button[data-v-53823b47]:hover{background-color:var(--color-background-secondary)}}.m-supportSelectPrice__button.is-active[data-v-53823b47]{color:var(--color-custom-accent);background-color:var(--color-surface-normal);border:2px solid var(--color-custom-accent)}.m-supportSelectPrice__icon[data-v-53823b47]{width:64px}@media only screen and (max-width:480px){.m-supportSelectPrice__icon[data-v-53823b47]{width:48px}}.m-supportSelectPrice__customField[data-v-53823b47]{width:70px}@media only screen and (max-width:480px){.m-supportSelectPrice__customField[data-v-53823b47]{width:60px}}.m-supportSelectPrice__price[data-v-53823b47]{font-size:var(--font-size-lg);font-weight:700;line-height:1}@media only screen and (max-width:480px){.m-supportSelectPrice__price[data-v-53823b47]{font-size:var(--font-size-base)}}.m-supportSelectPrice__unit[data-v-53823b47]{margin-left:2px;font-size:var(--font-size-xs);line-height:1}.m-supportSelectPrice__footer[data-v-53823b47]{display:flex;align-items:center;justify-content:center;height:30px}",""]),r.locals={},e.exports=r},3170:function(e,t,n){var content=n(4088);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(13).default)("6cf34556",content,!0,{sourceMap:!1})},3171:function(e,t,n){var content=n(4090);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(13).default)("bb8571a2",content,!0,{sourceMap:!1})},3600:function(e,t,n){"use strict";var r=n(0),o=(n(29),n(15),n(3)),c=n(16),l=n(9),d=n(245),h=n(355),m=n(1424),_=n(2125),f=n(188),v=n(21),y=n(190),x=n(80),C=n(193),w=n(247),k=n(402),S=n(246),P=n(116),M=n(34),O=n(26),T=n(47),z=n(1937),N=n(1763),$=n(2544),E=n(2545),L=n(1493),B=n(106),R=n(1746),j=n(2e3),A=n(1526),F=o.a.extend({components:{NtIcon:O.default,NtLink:T.a,NtButton:M.a,SupportSelectPrice:E.a,FormTextarea:w.a,FormCheckbox:y.a,FormErrorList:x.a,FormGroup:C.a,InputCount:k.a,ModalFooterButtonGroup:S.a,PurchaseConfirmLink:z.a,PurchaseCover:N.a,PurchaseRefundHelpLink:$.a,ModalHeading:P.a,PaypayBanner:j.a},mixins:[m.a,_.a,h.a,d.a,A.a],props:{isModal:{type:Boolean,default:!1},placeType:{type:String,default:"purchase-oneshot-modal"}},data:()=>({isSubmitting:!1,apiError:null}),computed:{config:()=>l,actionType(){return this.$store.state.modal.purchaseModalContainer.actionType},paymentMethod(){return this.$store.state.modal.purchaseModalContainer.paymentMethod||this.currentUser.lastPaymentMethod},note(){return this.$store.state.purchase.note},magazine(){return this.$store.state.purchase.magazine},contentName(){return"note_purchase"===this.actionType?this.note.name:this.magazine.name},contentCoverUrl(){var e,t,n=(null===(e=this.magazine)||void 0===e?void 0:e.coverLandscapeSp)||(null===(t=this.magazine)||void 0===t?void 0:t.cover);return"note_purchase"===this.actionType?this.$store.getters[f.PURCHASE_GETTER_TYPES.GET_COVER_URL]:n},contentAuthor(){return"note_purchase"===this.actionType?this.note.user:this.magazine.user},authorName(){return this.contentAuthor.nickname||this.contentAuthor.urlname},contentPrice(){return"note_purchase"===this.actionType?this.note.price:this.magazine.price},support(){return this.withSupport?{price:Number(this.currentSupport.price),message:this.supportMessage}:{}},headerText(){return this.showPurchaseButton?"購入内容の確認":"お支払い方法の選択"},showPurchaseButton(){return!!this.paymentMethod&&(!("creditcard"===this.paymentMethod&&!this.currentUser.canCheckout)&&Object.keys(l.paymentButtonLabels).includes(this.paymentMethod))},isSupportEnabled(){return!0!==this.contentAuthor.disableSupport},canSupport(){return this.isSupportEnabled&&this.showPurchaseButton&&["creditcard","paypay"].includes(this.paymentMethod)},showWithFollow(){return void 0!==this.contentAuthor.id&&(!this.contentAuthor.isFollowing&&null!==this.paymentMethod)},isShowSupportError(){return this.withSupport&&this.$v.currentSupport.price.$error},isGoToConfirm(){return this.showPurchaseButton&&this.withSupport},priceValidateMessage(){var e=Object(B.number)(l.support.minPrice),t=Object(B.number)(l.support.maxPrice);return"".concat(e,"円から").concat(t,"円の間でサポートしてください。")},purchaseCoverKind(){return"note_purchase"==this.actionType?"note":"magazine"},contentKey(){switch(this.actionType){case"note_purchase":return this.note.key;case"magazine_purchase":case"magazine_subscribe":return this.magazine.key;default:return""}},backButtonName(){switch(this.actionType){case"note_purchase":return"記事へ戻る";case"magazine_purchase":case"magazine_subscribe":default:return"戻る"}},isPaypayBannerShowing:R.j,paypayBannerContentKey(){return Object(R.h)(this.$_purchaseable_actionType,this)},paypayBannerContentType(){return Object(R.i)(this.$_purchaseable_actionType)},simpleNonRefundableMessageExperimentGroupName(){var e,t=this.$store.getters[v.USER_GETTER_TYPES.EXPERIMENT_INFO_MAP],n=null===(e=null==t?void 0:t.PurchaseSimpleNonRefundableMessageExperiment)||void 0===e?void 0:e.groupName;return null!=n?n:"others"},isSimpleNonRefundableMessageTreatment(){return"treatment"==this.simpleNonRefundableMessageExperimentGroupName}},mounted(){var e,t;Object(L.c)(this.$tracker,{kind:L.a.cv_purchasing_process,action:"imp",contentType:"note_purchase"==this.actionType?"Note":"Magazine",contentKey:"note_purchase"==this.actionType?null===(e=this.note)||void 0===e?void 0:e.key:null===(t=this.magazine)||void 0===t?void 0:t.key,placeType:this.placeType,purchaseType:"paid",experiment_info:{simple_non_refundable_message:{group_name:this.simpleNonRefundableMessageExperimentGroupName},purchase_confirm_button:{group_name:this.purchaseConfirmButtonGroupName}}})},methods:{init(){this.$v.$reset(),Object.assign(this.$data,{isSubmitting:!1,apiError:null})},setWithFollow(e){this.withFollow=e},setWithSupport(e){this.withSupport=e},setSupportPrice(e){this.supportPrice=void 0===e.price?0:Number(e.price),this.supportPriceKind=e.kind},changePaymentMethod(){this.isValidSupport()&&this.$emit("changePaymentMethod",{supportPrice:this.support.price,supportMessage:this.support.message,nextPageDisableFollow:this.showWithFollow,withFollow:this.withFollow,paymentMethod:this.paymentMethod})},confirm(){this.isValidSupport()&&(this.$emit("confirm",{supportPrice:this.support?this.support.price:0,supportMessage:this.support?this.support.message:"",nextPageDisableFollow:this.showWithFollow,withFollow:this.withFollow}),this.$_purchaseable_shouldShowCautionModal&&this.isModal&&this.replacePurchaseCautionModal({afterCaution:"confirm"}))},purchase(){var e=this;return Object(r.a)((function*(){if(e.isValidSupport())if(e.$_purchaseable_shouldShowCautionModal)e.isModal?e.replacePurchaseCautionModal({afterCaution:"purchase"}):e.replacePurchaseCautionModal({afterCaution:"purchase",nextRoute:{method:"replace",query:{at:e.actionType,k:e.contentKey}}});else{e.isSubmitting=!0;var t=e.isModal?{}:{returnUrl:"".concat(l.defaultBaseUrl,"/a/purchase/after_purchase")};e.showWithFollow&&e.withFollow&&(yield e.followUser({userId:e.contentAuthor.id,userKey:e.contentAuthor.key,via:"purchase_content"})),yield e.$_purchaseable_purchase(t),e.isSubmitting=!1}}))()},isValidSupport(){return!this.withSupport||(this.$v.$touch(),!this.$v.$invalid)},closeModal(){c.o.remove("note-detail-paywall-click"),this.$store.dispatch(f.PURCHASE_ACTION_TYPES.SET_BEFORE_PURCHASING_PLACE,""),this.$emit("close")},handlePaypayBannerClick(){this.changePaymentMethod()}}}),I=(n(4087),n(4089),n(5)),component=Object(I.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-purchaseOneshotContent",class:{"m-purchaseOneshotContent__contentTreatment":e.isPurchaseConfirmButtonTreatment}},[e.isPurchaseConfirmButtonTreatment?n("div",[n("nt-button",{staticClass:"ml-2 mt-2",attrs:{size:"small",type:"basic",disabled:e.isSubmitting},on:{click:function(t){return t.preventDefault(),e.closeModal(t)}}},[e._v("\n      "+e._s(e.backButtonName)+"\n    ")])],1):e._e(),e._v(" "),n("div",{staticClass:"m-basicModalContent__header",class:{"m-purchaseOneshotContent__headerTreatment":e.isPurchaseConfirmButtonTreatment}},[e.isModal?n("modal-heading",{staticStyle:{display:"inline"}},[e._v("\n      "+e._s(e.headerText)+"\n    ")]):[e._v("\n      "+e._s(e.headerText)+"\n    ")],e._v(" "),n("nt-link",{staticClass:"m-purchaseOneshotContent__helpLink",attrs:{href:e.$path.staticPath("https://help-note.com/hc/ja/articles/360010310214"),"aria-label":"有料記事を購入する（購入方法）",target:"_blank"}},[n("nt-icon",{attrs:{type:"help",clickable:!1}})],1)],2),e._v(" "),n("div",{staticClass:"m-basicModalContent__body"},[n("div",{class:{"m-purchaseOneshotContent__body":e.canSupport||e.showPurchaseButton}},[n("div",{staticClass:"m-purchaseOneshotContent__item m-purchaseOneshotContent__item--target",class:{"m-purchaseOneshotContent__coverTreatment":e.isPurchaseConfirmButtonTreatment}},[n("purchase-cover",{attrs:{kind:e.purchaseCoverKind,"image-url":e.contentCoverUrl,title:e.contentName,"author-name":e.authorName,price:e.contentPrice,note:e.note,magazine:e.magazine,"is-simple-non-refundable-message-treatment":e.isSimpleNonRefundableMessageTreatment}})],1),e._v(" "),e.canSupport?n("div",{staticClass:"m-purchaseOneshotContent__item",class:{"mx-2":e.isPurchaseConfirmButtonTreatment}},[n("div",{staticClass:"m-purchaseOneshotContent__itemInline"},[n("form-checkbox",{attrs:{id:"with-support",value:!0,checked:e.withSupport,label:"クリエイターをサポート"},on:{input:e.setWithSupport}})],1),e._v(" "),n("div",{staticClass:"m-purchaseOneshotContent__itemInline"},[n("nt-link",{staticClass:"m-purchaseOneshotContent__helpLink__howToSupport",attrs:{href:"https://help-note.com/hc/ja/articles/360009035473",target:"_blank"}},[e._v("\n            サポートとは\n          ")])],1)]):e._e(),e._v(" "),e.withSupport?n("div",{staticClass:"m-purchaseOneshotContent__item",class:{"mx-2":e.isPurchaseConfirmButtonTreatment}},[n("form-group",{attrs:{label:"金額"}},[n("support-select-price",{attrs:{"support-price":e.supportPrice,"support-price-kind":e.supportPriceKind},on:{input:e.setSupportPrice},model:{value:e.currentSupport,callback:function(t){e.currentSupport=t},expression:"currentSupport"}}),e._v(" "),n("form-error-list",{directives:[{name:"show",rawName:"v-show",value:e.isShowSupportError,expression:"isShowSupportError"}],attrs:{slot:"errorMessage"},slot:"errorMessage"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.$v.currentSupport.price.range,expression:"!$v.currentSupport.price.range"}]},[e._v("\n              "+e._s(e.priceValidateMessage)+"\n            ")])])],1)],1):e._e(),e._v(" "),e.withSupport?n("div",{staticClass:"m-purchaseOneshotContent__item",class:{"mx-2":e.isPurchaseConfirmButtonTreatment}},[n("form-textarea",{attrs:{id:"message",placeholder:e.messagePlaceholder,"has-error":e.$v.supportMessage.$error,label:"メッセージ"},model:{value:e.supportMessage,callback:function(t){e.supportMessage=t},expression:"supportMessage"}},[n("form-error-list",{directives:[{name:"show",rawName:"v-show",value:e.$v.supportMessage.$error,expression:"$v.supportMessage.$error"}],attrs:{slot:"errorMessage"},slot:"errorMessage"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.$v.supportMessage.maxLength,expression:"!$v.supportMessage.maxLength"}]},[e._v("\n              "+e._s(e.config.support.maxMessageNum)+"文字以内で入力してください。\n            ")])])],1),e._v(" "),n("input-count",{attrs:{length:e.supportMessage.length,"max-length":e.config.support.maxMessageNum}})],1):e._e(),e._v(" "),e.showWithFollow?n("div",{staticClass:"m-purchaseOneshotContent__item",class:{"mx-2":e.isPurchaseConfirmButtonTreatment}},[n("div",{staticClass:"m-purchaseOneshotContent__itemInline"},[n("form-checkbox",{attrs:{id:"withFollow",value:!0,checked:e.withFollow,label:"クリエイターをフォロー"},on:{input:e.setWithFollow}})],1)]):e._e(),e._v(" "),e.showPurchaseButton?n("div",{staticClass:"m-purchaseOneshotContent__item",class:{"m-purchaseOneshotContent__item--border":e.canSupport,"mx-2":e.isPurchaseConfirmButtonTreatment}},[n("div",{staticClass:"m-purchaseOneshotContent__payment"},[n("div",{staticClass:"m-purchaseOneshotContent__paymentLabel"},[e._v("\n            決済方法: "+e._s(e.config.paymentLabels[e.paymentMethod])+"\n          ")]),e._v(" "),n("nt-link",{staticClass:"m-purchaseOneshotContent__paymentChange",nativeOn:{click:function(t){return e.changePaymentMethod()}}},[e._v("\n            変更\n          ")])],1)]):e._e(),e._v(" "),e.isPaypayBannerShowing?n("div",[n("paypay-banner",{class:{"px-2":e.isPurchaseConfirmButtonTreatment},attrs:{mode:"purchase","content-key":e.paypayBannerContentKey,"content-type":e.paypayBannerContentType},on:{click:e.handlePaypayBannerClick}})],1):e._e(),e._v(" "),e.apiError?n("div",{staticClass:"m-purchaseOneshotContent__item"},[n("form-error-list",[n("div",[e._v(e._s(e.toApiErrorMessage(e.apiError)))])])],1):e._e()])]),e._v(" "),n("div",{class:{"m-purchaseOneshotContent__linkTreatment":e.isPurchaseConfirmButtonTreatment}},[e.isSimpleNonRefundableMessageTreatment?n("purchase-refund-help-link"):e._e(),e._v(" "),n("purchase-confirm-link")],1),e._v(" "),e.isPurchaseConfirmButtonTreatment?n("div",{staticClass:"m-purchaseOneshotContent__footerTreatment"},[e.isGoToConfirm?n("nt-button",{attrs:{disabled:e.$v.$anyError,size:"large",width:"fit",type:"primary"},on:{click:function(t){return t.preventDefault(),e.confirm(t)}}},[e._v("\n      確認\n    ")]):e.showPurchaseButton?n("nt-button",{attrs:{disabled:e.isSubmitting,size:"large",width:"fit",type:"primary"},on:{click:function(t){return t.preventDefault(),e.purchase(t)}}},[e._v("\n      購入\n    ")]):n("nt-button",{attrs:{disabled:e.$v.$anyError,size:"large",width:"fit",type:"primary"},on:{click:function(t){return t.preventDefault(),e.changePaymentMethod(t)}}},[e._v("\n      決済方法を選択\n    ")])],1):n("div",{staticClass:"m-basicModalContent__footer"},[n("modal-footer-button-group",{scopedSlots:e._u([{key:"default",fn:function(t){return[n("nt-button",{class:t.buttonClass,attrs:{size:"small",type:"basic",disabled:e.isSubmitting},on:{click:function(t){return t.preventDefault(),e.closeModal()}}},[e._v("\n          キャンセル\n        ")]),e._v(" "),e.isGoToConfirm?n("nt-button",{class:t.buttonClass,attrs:{disabled:e.$v.$anyError,size:"small",type:"primary"},on:{click:function(t){return t.preventDefault(),e.confirm()}}},[e._v("\n          確認\n        ")]):e.showPurchaseButton?n("nt-button",{class:t.buttonClass,attrs:{disabled:e.isSubmitting,size:"small",type:"primary"},on:{click:function(t){return t.preventDefault(),e.purchase()}}},[e._v("\n          購入する\n        ")]):n("nt-button",{class:t.buttonClass,attrs:{disabled:e.$v.$anyError,size:"small",type:"primary"},on:{click:function(t){return t.preventDefault(),e.changePaymentMethod()}}},[e._v("\n          決済方法を選択\n        ")])]}}])})],1)])}),[],!1,null,"6feec77e",null);t.a=component.exports},4087:function(e,t,n){"use strict";n(3170)},4088:function(e,t,n){var r=n(12)((function(i){return i[1]}));r.push([e.i,".m-basicModalContent[data-v-6feec77e]{position:relative;margin:56px auto;background:var(--color-surface-normal);border-radius:4px}@media only screen and (max-width:480px){.m-basicModalContent[data-v-6feec77e]{margin:8px auto 80px}}.m-basicModalContent__header[data-v-6feec77e]:not(:empty){padding:16px;font-size:var(--font-size-base);color:var(--color-text-primary);text-align:center;border-bottom:1px solid var(--color-border-default)}@media only screen and (max-width:480px){.m-basicModalContent__body[data-v-6feec77e]{width:100%}}.m-basicModalContent__body--height[data-v-6feec77e]{max-height:440px}@media only screen and (max-width:480px){.m-basicModalContent__body--height[data-v-6feec77e]{height:calc(100vh - 240px)}}.m-basicModalContent__body--scrollable[data-v-6feec77e]{max-height:440px;overflow-y:auto}@media only screen and (max-width:480px){.m-basicModalContent__body--scrollable[data-v-6feec77e]{max-height:calc(100vh - 240px)}}.m-basicModalContent__footer[data-v-6feec77e]{display:flex;align-items:center;justify-content:center;padding:16px;background-color:var(--color-background-secondary);border-top:1px solid var(--color-border-default);border-radius:0 0 4px 4px}.m-basicModalContent--size_small[data-v-6feec77e]{width:470px}@media only screen and (max-width:480px){.m-basicModalContent--size_small[data-v-6feec77e]{width:calc(100% - 16px)}}.m-basicModalContent--size_medium[data-v-6feec77e]{width:580px}@media only screen and (max-width:480px){.m-basicModalContent--size_medium[data-v-6feec77e]{width:calc(100% - 16px)}}.m-basicModalContent--size_large[data-v-6feec77e]{width:100%}@media only screen and (max-width:480px){.m-basicModalContent--size_large[data-v-6feec77e]{width:calc(100% - 16px)}}",""]),r.locals={},e.exports=r},4089:function(e,t,n){"use strict";n(3171)},4090:function(e,t,n){var r=n(12)((function(i){return i[1]}));r.push([e.i,"@media only screen and (max-width:480px){.m-purchaseOneshotContent__contentTreatment[data-v-6feec77e]{margin-bottom:-60px!important}}.m-purchaseOneshotContent__headerTreatment[data-v-6feec77e]{padding-left:8px!important;font-size:var(--font-size-xl)!important;font-weight:700;text-align:start!important;border-bottom:none!important}.m-purchaseOneshotContent__footerTreatment[data-v-6feec77e]{display:flex;flex-direction:column;padding:16px 0}@media only screen and (max-width:480px){.m-purchaseOneshotContent__footerTreatment[data-v-6feec77e]{position:fixed;bottom:0;left:0;z-index:1;width:100%;padding:16px 16px calc(16px + env(safe-area-inset-bottom))}}.m-purchaseOneshotContent__coverTreatment[data-v-6feec77e]{padding:0 8px;margin-right:8px!important;margin-left:8px!important;border-radius:8px}@media only screen and (max-width:480px){.m-purchaseOneshotContent__linkTreatment[data-v-6feec77e]{padding-top:24px;margin:0 8px;border-top:1px solid var(--color-border-default)}}.m-purchaseOneshotContent__body[data-v-6feec77e]{padding-bottom:24px}@media only screen and (max-width:480px){.m-purchaseOneshotContent__body[data-v-6feec77e]{padding-bottom:16px}}.m-purchaseOneshotContent__item[data-v-6feec77e]{margin-right:24px;margin-left:24px}@media only screen and (max-width:480px){.m-purchaseOneshotContent__item[data-v-6feec77e]{margin-right:16px;margin-left:16px}}.m-purchaseOneshotContent__item+.m-purchaseOneshotContent__item[data-v-6feec77e]{margin-top:16px;margin-bottom:16px}.m-purchaseOneshotContent__item--target[data-v-6feec77e]{padding:16px 24px;margin-right:0;margin-left:0;background-color:var(--color-background-secondary)}@media only screen and (max-width:480px){.m-purchaseOneshotContent__item--target[data-v-6feec77e]{padding:16px}}.m-purchaseOneshotContent__item--border[data-v-6feec77e]{padding-top:16px;border-top:1px solid var(--color-border-default)}.m-purchaseOneshotContent__itemInline[data-v-6feec77e]{display:inline-block}.m-purchaseOneshotContent__help[data-v-6feec77e]{margin-left:8px}.m-purchaseOneshotContent__helpLink[data-v-6feec77e],.m-purchaseOneshotContent__helpLink__howToSupport[data-v-6feec77e]{color:var(--color-text-clickable)}@media only screen and (min-width:769px){.m-purchaseOneshotContent__helpLink[data-v-6feec77e],.m-purchaseOneshotContent__helpLink__howToSupport[data-v-6feec77e]{transition:all .2s cubic-bezier(1,0,0,1)}.m-purchaseOneshotContent__helpLink[data-v-6feec77e]:hover,.m-purchaseOneshotContent__helpLink__howToSupport[data-v-6feec77e]:hover{color:var(--color-text-secondary)}}.m-purchaseOneshotContent__helpLink__howToSupport[data-v-6feec77e]{font-size:var(--font-size-xs);text-decoration:underline}.m-purchaseOneshotContent__helpSupport[data-v-6feec77e]{font-size:var(--font-size-sm);color:var(--color-text-secondary);text-decoration:underline}@media only screen and (min-width:769px){.m-purchaseOneshotContent__helpSupport[data-v-6feec77e]:hover{color:var(--color-text-primary)}}.m-purchaseOneshotContent__helpPay[data-v-6feec77e]{display:block;font-size:var(--font-size-sm);color:var(--color-text-secondary);text-align:center;text-decoration:underline}@media only screen and (min-width:769px){.m-purchaseOneshotContent__helpPay[data-v-6feec77e]:hover{color:var(--color-text-primary)}}.m-purchaseOneshotContent__payment[data-v-6feec77e]{display:inline-flex}.m-purchaseOneshotContent__paymentLabel[data-v-6feec77e]{font-size:var(--font-size-sm)}.m-purchaseOneshotContent__paymentChange[data-v-6feec77e]{margin-left:8px;font-size:var(--font-size-sm);color:var(--color-custom-accent)}.m-purchaseOneshotContent__footer[data-v-6feec77e]{display:flex;flex-direction:column;justify-content:flex-end;width:100%}.m-purchaseOneshotContent__footerButton[data-v-6feec77e]{margin-left:16px}",""]),r.locals={},e.exports=r}}]);