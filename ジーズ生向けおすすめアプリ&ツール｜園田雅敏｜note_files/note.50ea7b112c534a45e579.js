(window.webpackJsonp=window.webpackJsonp||[]).push([[515],{3311:function(t,e,n){var content=n(4386);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(13).default)("24307436",content,!0,{sourceMap:!1})},4385:function(t,e,n){"use strict";n(3311)},4386:function(t,e,n){var r=n(12)((function(i){return i[1]}));r.push([t.i,".o-pickUrlname__body[data-v-7bf97f62]{padding:40px}@media only screen and (max-width:480px){.o-pickUrlname__body[data-v-7bf97f62]{padding:24px}}.o-pickUrlname__title[data-v-7bf97f62]{margin-bottom:8px;font-size:var(--font-size-sm);font-weight:700;text-align:center}.o-pickUrlname__field[data-v-7bf97f62]{display:flex;align-items:center;padding:8px;margin-bottom:8px;border:1px solid var(--color-border-default);border-radius:4px}.o-pickUrlname__fieldDomain[data-v-7bf97f62]{flex:1;width:60px;font-size:var(--font-size-xs)}.o-pickUrlname__fieldInput[data-v-7bf97f62]{flex:2;margin-left:16px;border:none}.o-pickUrlname__error[data-v-7bf97f62]{font-size:var(--font-size-sm);color:var(--color-text-danger)}.o-pickUrlname__description[data-v-7bf97f62]{margin-top:16px;font-size:var(--font-size-xs);color:var(--color-text-secondary)}.o-pickUrlname__descriptionItem+.o-pickUrlname__descriptionItem[data-v-7bf97f62]{margin-top:8px}.o-pickUrlname__action[data-v-7bf97f62]{margin-top:16px}.o-pickUrlname__about[data-v-7bf97f62]{display:block;margin-top:16px;font-size:var(--font-size-sm);color:var(--color-text-success);text-align:center}",""]),r.locals={},t.exports=r},5186:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n(3),l=n(53),c=n(21),m=n(67),d=n(47),_=n(34),v=n(189),f=n(79),h=n(30),k=l.helpers.regex("urlnamePattern",/^[a-z0-9_]*$/),U=o.a.extend({components:{NtModal:m.a,NtLink:d.a,NtButton:_.a,NtInput:v.a,BasicModalContent:f.a},mixins:[h.a],data:()=>({customInput:!1,errorMessage:"",noteUrl:null,showInvalidUrlnameError:!1,isSubmitting:!1,urlname:null}),validations:{urlname:{required:l.required,minLength:Object(l.minLength)(3),maxLength:Object(l.maxLength)(16),pattern:k}},computed:{via(){return this.$store.state.modal.pickUrlnameModal.via},closeCallback(){return this.$store.state.modal.pickUrlnameModal.closeCallback},showUrlnameEmpty(){return!this.$v.urlname.required&&this.$v.urlname.$dirty},headerText(){var t="note IDを登録して、";return"note"===this.via?"".concat(t,"記事を投稿しよう。"):"like"===this.via?"".concat(t,"お気に入りの記事にスキをしよう。"):"comment"===this.via?"".concat(t,"コメントをしてみよう。"):"follow"===this.via?"".concat(t,"気になったユーザーをフォローしよう。"):"magazine_follow"===this.via?"".concat(t,"お気に入りのマガジンをフォローしよう。"):"make_magazine"===this.via?"".concat(t,"あなただけのマガジンを作ってみよう。"):["circle","membership"].includes(this.via)?"".concat(t,"メンバーシップに参加しよう。"):""}},mounted(){this.noteUrl=this.$store.state.url.currentNoteBaseUrl},methods:{init(){var t,e;this.urlname="",null===(e=null===(t=this.$refs.pickUrlnameInput)||void 0===t?void 0:t.$el)||void 0===e||e.focus()},submit(){var t=this;return Object(r.a)((function*(){if(t.$v.$touch(),!t.$v.$invalid){t.isSubmitting=!0;try{var e=yield t.$axios.$post("/v1/sessions/pick_urlname",{urlname:t.urlname});if(!e.error){if(yield t.$store.dispatch(c.USER_ACTION_TYPES.AUTH),t.closeCallback)return t.popModal(),void t.closeCallback();var n=t.$path.contentPath({contentType:"user",content:e.data});return t.$path.customDomain?window.location.href=n:t.$router.push(n),void t.popModal()}t.errorMessage=e.error.message}catch(e){422===e.status?t.showInvalidUrlnameError=!0:alert("エラーが発生しました。")}t.isSubmitting=!1}}))()}}}),x=(n(4385),n(5)),component=Object(x.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nt-modal",{attrs:{name:"pickUrlname"},on:{opened:t.init}},[n("basic-modal-content",{staticClass:"o-pickUrlname"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{domProps:{textContent:t._s(t.headerText)}})]),t._v(" "),n("div",{staticClass:"o-pickUrlname__body",attrs:{slot:"body"},slot:"body"},[n("form",{attrs:{novalidate:""}},[n("div",{staticClass:"o-pickUrlname__title"},[t._v("\n          note ID\n          "),n("span",{staticClass:"o-pickUrlname__titleDescription"},[t._v("\n            （あなたのクリエイターページのURLになります）\n          ")])]),t._v(" "),n("label",{staticClass:"o-pickUrlname__field",attrs:{for:"focus-me-top-priority"}},[n("div",{staticClass:"o-pickUrlname__fieldDomain"},[t._v(t._s(t.noteUrl))]),t._v(" "),n("nt-input",{ref:"pickUrlnameInput",staticClass:"o-pickUrlname__fieldInput",attrs:{id:"focus-me-top-priority",placeholder:"note ID",type:"text"},on:{input:t.$v.urlname.$touch},nativeOn:{blur:function(e){t.customInput=!t.customInput},focus:function(e){t.customInput=!t.customInput}},model:{value:t.urlname,callback:function(e){t.urlname="string"==typeof e?e.trim():e},expression:"urlname"}})],1),t._v(" "),t.showUrlnameEmpty?n("div",{staticClass:"o-pickUrlname__error"},[t._v("\n          note IDを入力してください\n        ")]):t._e(),t._v(" "),t.$v.urlname.pattern?t._e():n("div",{staticClass:"o-pickUrlname__error"},[t._v("\n          使用できるのは半角英数字（小文字）と_（アンダースコア）のみです。\n        ")]),t._v(" "),t.$v.urlname.minLength&&t.$v.urlname.maxLength?t._e():n("div",{staticClass:"o-pickUrlname__error"},[t._v("\n          note IDは3文字以上〜16文字以内で入力してください\n        ")]),t._v(" "),t.errorMessage?n("div",{staticClass:"o-pickUrlname__error"},[t._v("\n          "+t._s(t.errorMessage)+"\n        ")]):t._e(),t._v(" "),t.showInvalidUrlnameError?n("div",{staticClass:"o-pickUrlname__error"},[t._v("\n          このnote IDは使用することが出来ません\n        ")]):t._e(),t._v(" "),n("div",{staticClass:"o-pickUrlname__description"},[n("p",{staticClass:"o-pickUrlname__descriptionItem"},[t._v("\n            3文字以上〜16文字以内の半角英数字（小文字）と_（アンダースコア）が利用できます。\n          ")])]),t._v(" "),n("nt-button",{staticClass:"o-pickUrlname__action",attrs:{type:"primary",width:"fit",disabled:t.$v.$invalid||t.isSubmitting},on:{click:function(e){return e.preventDefault(),t.submit()}}},[t._v("\n          登録\n        ")]),t._v(" "),n("nt-link",{staticClass:"o-pickUrlname__about",attrs:{href:"https://help-note.com/hc/ja/articles/360011269954",target:"_blank"}},[t._v("\n          note IDとは\n        ")])],1)]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("nt-button",{attrs:{size:"small",type:"basic"},on:{click:function(e){return t.popModal()}}},[t._v("\n        閉じる\n      ")])],1)])],1)}),[],!1,null,"7bf97f62",null);e.default=component.exports}}]);