(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{2128:function(e,t,r){"use strict";r(29);var o=r(602);t.a={computed:{topic(){return this.$store.state.topic.topic},topicPages(){return this.$store.state.topic.pages},topicCurrentPage(){return this.$store.state.topic.currentPage},topicCurrentSection(){var e;return null===(e=this.$store.state.topic.sections)||void 0===e?void 0:e.find(((e,t)=>0===t))},isTopicFollowable(){return!this.$store.state.topic.isFollowing},isTopicAdminUser(){var e;return null===(e=this.topic)||void 0===e?void 0:e.isTopicAdminUser},isTopicOfficial(){var e;return null===(e=this.topic)||void 0===e?void 0:e.isOfficial},isTopicCustomDomain(){var e;return!!(null===(e=this.topic)||void 0===e?void 0:e.customDomain)}},methods:{isTopicRoute:e=>o.TOPIC_DEFULT_ROUTES.includes(e)||o.TOPIC_OFFICIAL_EXCEPTION_ROUTES.includes(e),isTopicNavbarTop:e=>o.TOPIC_NAVBAR_TOP_ROUTES.includes(e)}}},3263:function(e,t,r){var content=r(4273);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(13).default)("0fbc9702",content,!0,{sourceMap:!1})},4272:function(e,t,r){"use strict";r(3263)},4273:function(e,t,r){var o=r(12)((function(i){return i[1]}));o.push([e.i,".o-navBar[data-v-5eea1583]{position:relative;background-color:var(--color-surface-normal);border-bottom:1px solid var(--color-border-default);transition:transform .3s ease}@media only screen and (max-width:768px){.o-navBar[data-v-5eea1583]{box-shadow:none}}.o-navBar.is-sticky[data-v-5eea1583]{position:-webkit-sticky;position:sticky;top:0;z-index:11;transition:transform .3s ease;transform:translate(0)}@media print{.o-navBar.is-sticky[data-v-5eea1583]{display:none}}.o-navBar.is-stickyActive1[data-v-5eea1583]{transform:translateY(-100%)}.o-navBar.is-stickyActive1 .o-navBar__creator[data-v-5eea1583]{max-height:100px;visibility:visible;opacity:1;transition:opacity .3s}.o-navBar.is-stickyActive2[data-v-5eea1583]{transform:translate(0)}.o-navBar.is-stickyHide[data-v-5eea1583]{transform:translateY(-200%)}.o-navBar.is-stickyHide .o-navBar__creator[data-v-5eea1583]{visibility:hidden;transition:max-height .3s ease,opacity 0s .3s,visibility 0s .3s}.o-navBar__creator[data-v-5eea1583]{position:absolute;top:64px;left:0;width:100%;max-height:0;visibility:hidden;opacity:0}@media only screen and (max-width:480px){.o-navBar__creator[data-v-5eea1583]{top:48px}}",""]),o.locals={},e.exports=o},5064:function(e,t,r){"use strict";r.r(t),r.d(t,"PAGE_NAMES_HIDE_NAVBAR",(function(){return N}));r(10),r(20),r(11),r(15),r(29);var o=r(3),n=r(31),h=r(1414),c=r(535),l=r(253),d=r(2128),v=r(322),m=r(7);class w{constructor(e){this.tinyDiffThreshold=5,this.pageTopThreshold=132,this.context=e,this.lastScrollY=this.getScrollY(),this.lastOffsetHeight=this.getOffsetHeight(),this.upwardSum=0,this.upwardThreshold=this.context.$ua.isFromSmartphone()?200:300,this.showNavbar=!0}calc(){var e=this.getScrollY(),t=this.getOffsetHeight(),r=0<=this.lastScrollY-e,o=Math.abs(this.lastScrollY-e),n=Math.abs(this.lastOffsetHeight-t);if(this.lastScrollY=e,this.lastOffsetHeight=t,e<=this.pageTopThreshold){var h=.01*window.innerHeight;return document.documentElement.style.setProperty("--ih","".concat(h,"px")),this.showNavbar=!0,void(this.upwardSum=0)}0<n?this.upwardSum=0:o<this.tinyDiffThreshold||(r?this.moveUpward(o):this.moveDownward())}moveUpward(e){if(this.upwardSum+=e,!this.showNavbar){this.showNavbar=this.upwardThreshold<this.upwardSum;var t=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(t,"px"))}}moveDownward(){if(!1!==this.showNavbar){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(e,"px"))}this.upwardSum=0,this.showNavbar=!1}getOffsetHeight(){return document.documentElement.offsetHeight}getScrollY(){return Math.max(0,window.pageYOffset||document.documentElement.scrollTop)}}class f{constructor(e){this.tinyDiffThreshold=5,this.pageTopThreshold=60,this.context=e,this.lastScrollY=this.getScrollY(),this.lastOffsetHeight=this.getOffsetHeight(),this.upwardSum=0,this.upwardThreshold=this.context.$ua.isFromSmartphone()?200:300,this.showNavbar=!0,this.showCreatorHeader=!1}calc(){var e=this.getScrollY(),t=this.getOffsetHeight(),r=0<=this.lastScrollY-e,o=Math.abs(this.lastScrollY-e),n=Math.abs(this.lastOffsetHeight-t);if(this.lastScrollY=e,this.lastOffsetHeight=t,e<=this.pageTopThreshold){this.showNavbar=!0,this.showCreatorHeader=!1,this.upwardSum=0;var h=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(h,"px"))}else 0<n?this.upwardSum=0:o<this.tinyDiffThreshold||(r?this.moveUpward(o):this.moveDownward())}moveUpward(e){if(this.upwardSum+=e,this.showNavbar&&this.showCreatorHeader);else if(this.showNavbar&&!this.showCreatorHeader){if(this.showNavbar){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(t,"px"))}this.showNavbar=!1,this.showCreatorHeader=!0}else if(!this.showNavbar&&this.showCreatorHeader){var r=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(r,"px")),this.showNavbar=this.upwardThreshold<this.upwardSum}else this.showCreatorHeader=!0}moveDownward(){if(this.upwardSum=0,this.showNavbar){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(e,"px"))}this.showNavbar=!1,this.showCreatorHeader=!0}getOffsetHeight(){return document.documentElement.offsetHeight}getScrollY(){return Math.max(0,window.pageYOffset||document.documentElement.scrollTop)}}var N=["activate","a-purchase-after_purchase","a-purchase-caution","a-purchase-confirm","a-purchase-credit_card_input","a-purchase-oneshot","a-purchase-payment_method","a-purchase-subscribe_magazine","a-purchase-support","a-purchase-unsubscribe_magazine","a-purchase-unsubscribe_magazine_complete","a-purchase-unsubscribe_magazine_confirm","a-purchase-subscribe_circle_plan","a-purchase-subscribe_circle_plan_complete","a-purchase-unsubscribe_circle_plan","a-purchase-guest-credit_card_input","a-purchase-guest-confirm","a-purchase-guest-after_purchase","a-purchase-guest-after_signup","notes-key-edit","notes-key-paypart","notes-new","receipt-key"],S=["bestsellers","bestsellers-category","categories","categories-category","circle","circle-category","creator_fes","membership","membership-category","contest-hashtag","contests","contests-state","following","hashtag","hashtag-hashtag","index","magazine","magazine-all","magazine-free","magazine-official","magazine-paid","magazine-subscription","recommend","recommend-archives-year-month","terms","terms-embed","terms-specified","users"],_=o.a.extend({components:{NavbarMenu:()=>r.e(172).then(r.bind(null,5263)),NavbarNoteDetail:()=>r.e(174).then(r.bind(null,5264)),NavbarPrimary:()=>Promise.all([r.e(4),r.e(32),r.e(102),r.e(369),r.e(175)]).then(r.bind(null,5076)),NavbarPrimaryGuest:()=>Promise.all([r.e(4),r.e(32),r.e(102),r.e(370),r.e(176)]).then(r.bind(null,5265))},mixins:[d.a],props:{isErrorPage:{type:Boolean,default:!1}},data:()=>({noteDetailHeaderBehavior:null,navbarHeaderBehavior:null}),computed:Object.assign(Object.assign({},Object(n.e)(v.moduleName,["showNavbar","isCreatorProfileVisibleOrAbove"])),{computedHeaderClass(){var e,t,r,o,n=[];if(this.isNoteDetailPage){var h=null===(t=null===(e=this.noteDetailHeaderBehavior)||void 0===e?void 0:e.showNavbar)||void 0===t||t;n.push("is-sticky"),h||this.isShowCreatorHeader?!h&&this.isShowCreatorHeader?n.push("is-stickyActive1"):h&&!this.isShowCreatorHeader||n.push("is-stickyActive2"):n.push("is-stickyHide")}else if(this.$ua.isFromSmartphone()){var c=null===(o=null===(r=this.navbarHeaderBehavior)||void 0===r?void 0:r.showNavbar)||void 0===o||o;n.push("is-sticky"),!1===c&&n.push("is-stickyHide")}return n},navbarNoteDetailClass(){return[this.isShowCreatorHeader?"active":""]},isNoteDetailPage(){return["n-key","urlname-n-key"].includes(this.$route.name)&&!this.isErrorPage},isShowNavbarMenu(){return S.includes(this.$route.name)||this.isTopicOfficial&&this.isTopicRoute(this.$route.name)},isShowCreatorHeader(){var e,t;return null!==(t=null===(e=this.noteDetailHeaderBehavior)||void 0===e?void 0:e.showCreatorHeader)&&void 0!==t&&t&&!this.isCreatorProfileVisibleOrAbove}}),watch:{$route(){this.setNavbar(),this.removeScrollEventListener(),this.setScrollEventListenerIfNeed()}},updated(){this.notifyNavbarHeight()},created(){this.setNavbar()},mounted(){this.setScrollEventListenerIfNeed(),this.notifyNavbarHeight()},beforeDestroy(){this.removeScrollEventListener()},methods:Object.assign(Object.assign({},Object(n.b)({setShowNavbar:v.NAVBAR_ACTION_TYPES.SET_SHOW_NAVBAR,setShowNavbarMenu:v.NAVBAR_ACTION_TYPES.SET_SHOW_NAVBAR_MENU,setNavbarHeight:v.NAVBAR_ACTION_TYPES.SET_NAVBAR_HEIGHT,setIsShowingNoteDetailNavbar:m.NOTE_DETAIL_ACTION_TYPES.SET_IS_SHOWING_NAVBAR})),{setNavbar(){var e=/(note-android|iPhone note)/.test(this.$ua.original());this.setShowNavbar(!c.pageNamesToHide.includes(this.$route.name)&&!e),this.setShowNavbarMenu(this.isShowNavbarMenu)},removeScrollEventListener(){window.removeEventListener("scroll",this.handleNoteDetailScroll),window.removeEventListener("scroll",this.handleScroll)},getNavbarHeight(){var{$el:e}=this;return e?e.offsetHeight:0},setScrollEventListenerIfNeed(){this.isNoteDetailPage?Object(l.a)((()=>{this.noteDetailHeaderBehavior=new f(this),window.addEventListener("scroll",this.handleNoteDetailScroll,{passive:!0})})):this.$ua.isFromSmartphone()&&Object(l.a)((()=>{this.navbarHeaderBehavior=new w(this),window.addEventListener("scroll",this.handleScroll,{passive:!0})}))},handleScroll:Object(h.a)((function(){this.navbarHeaderBehavior.calc()}),100),handleNoteDetailScroll:Object(h.a)((function(){this.noteDetailHeaderBehavior.calc(),this.setIsShowingNoteDetailNavbar(this.noteDetailHeaderBehavior.showNavbar)}),100),notifyNavbarHeight(){this.$refs.container&&this.setNavbarHeight(this.$refs.container.offsetHeight)}})}),y=(r(4272),r(5)),component=Object(y.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.showNavbar?r("header",{ref:"container",staticClass:"o-navBar",class:e.computedHeaderClass},[e.currentUser?r("navbar-primary"):r("navbar-primary-guest"),e._v(" "),e.$path.customDomain?e._e():r("navbar-menu"),e._v(" "),e.isNoteDetailPage&&e.$ua.isFromSmartphone()?r("navbar-note-detail",{staticClass:"o-navBar__creator",class:e.navbarNoteDetailClass}):e._e()],1):e._e()}),[],!1,null,"5eea1583",null);t.default=component.exports}}]);